<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TV DO BILL - Player Completo</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { 
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
    background: #111; 
    color: #fff; 
    overflow: hidden; 
    height: 100vh; 
    display: flex; 
    flex-direction: column; 
}
/* Header Styles */
.header { 
    background: linear-gradient(to right, #900, #600); 
    padding: 12px 15px; 
    display: flex; 
    align-items: center; 
    justify-content: space-between;
    box-shadow: 0 2px 10px rgba(0,0,0,0.5);
    z-index: 100;
}
.logo { font-size: 26px; font-weight: bold; color: #fff; display:flex; align-items:center;}
.logo i { margin-right:10px;color:#ffcc00; }
.search-bar { flex-grow:1; max-width:400px; margin:0 20px; position:relative; }
.search-input { width:100%; padding:12px 15px 12px 40px; border:none; border-radius:25px; background:rgba(255,255,255,0.15); color:#fff; font-size:16px; transition: all 0.3s;}
.search-input:focus { outline:none; background:rgba(255,255,255,0.25); box-shadow:0 0 0 2px rgba(255,204,0,0.5);}
.search-bar i { position:absolute; left:15px; top:50%; transform:translateY(-50%); color:#ccc; }
.header-actions { display:flex; gap:15px; }
.header-btn { background:rgba(255,255,255,0.15); border:none; color:white; width:40px; height:40px; border-radius:50%; display:flex; align-items:center; justify-content:center; cursor:pointer; transition:all 0.2s; }
.header-btn:hover { background:rgba(255,255,255,0.25); }
/* Container Styles */
.container { display:flex; flex-grow:1; overflow:hidden; position:relative; }
/* Sidebar Styles */
.sidebar { width:300px; background:#222; overflow-y:auto; border-right:2px solid #900; display:flex; flex-direction:column; transition:transform 0.3s ease; z-index:10; }
.sidebar-header { padding:15px; background:#2a2a2a; display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid #444; }
.sidebar-title { font-size:18px; font-weight:bold; }
.channels-list { flex-grow:1; overflow-y:auto; list-style:none; }
.channels-list li { padding:12px 15px; border-bottom:1px solid #333; cursor:pointer; transition:background 0.2s; display:flex; align-items:center; }
.channels-list li:hover { background:#333; }
.channels-list li.active { background:#900; color:#fff; }
.channel-logo { width:28px; height:28px; margin-right:12px; object-fit:contain; border-radius:4px; }
.channel-info { flex-grow:1; }
.channel-name { font-size:15px; margin-bottom:2px; }
.channel-group { font-size:11px; color:#aaa; }
/* Player Styles */
.player { flex-grow:1; background:#000; display:flex; justify-content:center; align-items:center; position:relative; }
.video-player { width:100%; height:100%; background:#000; }
.player-controls { position:absolute; bottom:0; left:0; right:0; background:linear-gradient(to top, rgba(0,0,0,0.8), transparent); padding:20px 15px 10px; display:flex; align-items:center; opacity:0; transition:opacity 0.3s; pointer-events:none; }
.player:hover .player-controls { opacity:1; pointer-events:all; }
.control-btn { background:rgba(255,255,255,0.2); border:none; color:white; width:36px; height:36px; border-radius:50%; display:flex; align-items:center; justify-content:center; cursor:pointer; margin:0 5px; transition:all 0.2s; }
.control-btn:hover { background:rgba(255,255,255,0.3); transform:scale(1.1); }
.volume-control { display:flex; align-items:center; margin:0 10px; width:100px; }
.volume-slider { width:100%; -webkit-appearance:none; height:4px; border-radius:2px; background:#ddd; outline:none; }
.volume-slider::-webkit-slider-thumb { -webkit-appearance:none; appearance:none; width:14px; height:14px; border-radius:50%; background:#fff; cursor:pointer; }
.time-display { margin:0 10px; font-size:14px; color:#ddd; }
.progress-bar { flex-grow:1; height:5px; background:rgba(255,255,255,0.2); border-radius:3px; margin:0 10px; position:relative; cursor:pointer; }
.progress { position:absolute; top:0; left:0; height:100%; background:#900; border-radius:3px; width:0%; }
/* UI Elements */
.fullscreen-button { position:absolute; top:15px; right:15px; background:rgba(0,0,0,0.7); border:none; color:white; padding:10px 15px; border-radius:5px; cursor:pointer; z-index:20; display:none; transition:all 0.2s;}
.fullscreen-button:hover { background:rgba(0,0,0,0.9);}
.loading { position:absolute; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); display:flex; justify-content:center; align-items:center; flex-direction:column; z-index:10;}
.spinner { width:50px; height:50px; border:5px solid #333; border-top:5px solid #900; border-radius:50%; animation:spin 1s linear infinite; margin-bottom:15px;}
.loading-text { font-size:18px; color:#fff; }
.error-message { position:absolute; bottom:20px; left:50%; transform:translateX(-50%); background:#900; padding:12px 24px; border-radius:5px; z-index:10; display:none; max-width:80%; text-align:center; box-shadow:0 3px 10px rgba(0,0,0,0.3);}
.info-panel { position:absolute; top:15px; left:15px; background:rgba(0,0,0,0.7); padding:10px 15px; border-radius:5px; font-size:14px; z-index:5; display:none; backdrop-filter:blur(5px);}
.stats-panel { position:absolute; bottom:15px; right:15px; background:rgba(0,0,0,0.7); padding:8px 12px; border-radius:5px; font-size:12px; z-index:5; display:none; backdrop-filter:blur(5px);}
@keyframes spin { 0% { transform:rotate(0deg); } 100% { transform:rotate(360deg); } }
@keyframes pulse { 0% { opacity:1; } 50% { opacity:0.5; } 100% { opacity:1; } }
.pulsing { animation:pulse 1s infinite; }
@keyframes fadeIn { from{opacity:0;} to{opacity:1;} }
.fade-in { animation:fadeIn 0.3s ease; }
/* Responsive Styles */
@media (max-width:768px) { .container{ flex-direction:column; } .sidebar{ width:100%; height:40%; border-right:none; border-bottom:2px solid #900;} .search-bar{ max-width:200px;} .header-actions{ gap:8px;} .header-btn{ width:35px;height:35px;}}
/* Custom Scrollbar */
::-webkit-scrollbar { width:8px; }
::-webkit-scrollbar-track { background:#222;}
::-webkit-scrollbar-thumb { background:#444; border-radius:4px;}
::-webkit-scrollbar-thumb:hover { background:#555;}
</style>
</head>
<body>
<div class="header">
    <div class="logo"><i class="fas fa-tv"></i><span>TV BILL</span></div>
    <div class="search-bar"><i class="fas fa-search"></i><input type="text" class="search-input" placeholder="Buscar canal..." id="search-input"></div>
    <div class="header-actions">
        <button class="header-btn" id="toggle-sidebar" title="Alternar lista de canais"><i class="fas fa-bars"></i></button>
        <button class="header-btn" id="refresh-button" title="Recarregar canais"><i class="fas fa-sync-alt"></i></button>
    </div>
</div>
<div class="container">
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header"><div class="sidebar-title">Canais</div></div>
        <ul class="channels-list" id="channels-list"></ul>
    </div>
    <div class="player" id="player">
        <video class="video-player" id="video-player" controls playsinline></video>
        <div class="player-controls">
            <button class="control-btn" id="play-pause"><i class="fas fa-play"></i></button>
            <div class="volume-control">
                <button class="control-btn" id="mute-btn"><i class="fas fa-volume-up"></i></button>
                <input type="range" class="volume-slider" id="volume-slider" min="0" max="1" step="0.1" value="1">
            </div>
            <div class="time-display" id="time-display">00:00 / 00:00</div>
            <div class="progress-bar" id="progress-bar"><div class="progress" id="progress"></div></div>
            <button class="control-btn" id="fullscreen-btn"><i class="fas fa-expand"></i></button>
        </div>
        <div class="fullscreen-button" id="exit-fullscreen-button"><i class="fas fa-compress"></i> Voltar</div>
        <div class="loading" id="loading"><div class="spinner"></div><div class="loading-text">Carregando...</div></div>
        <div class="error-message" id="error-message"></div>
        <div class="info-panel" id="info-panel"></div>
        <div class="stats-panel" id="stats-panel"></div>
    </div>
</div>
<script>
let allChannels=[],currentChannel=null,retryTimeout=null,connectionStats={retries:0,lastError:null,lastSuccess:null},isFullscreen=false,isPlaying=false;
document.addEventListener('DOMContentLoaded',()=>{initApp();});
function initApp(){setupEventListeners();loadChannels();startConnectionMonitor();}
function setupEventListeners(){
document.getElementById('search-input').addEventListener('input',filterChannels);
document.getElementById('fullscreen-btn').addEventListener('click',toggleFullscreen);
document.getElementById('exit-fullscreen-button').addEventListener('click',toggleFullscreen);
document.getElementById('toggle-sidebar').addEventListener('click',()=>{document.getElementById('sidebar').classList.toggle('hidden');});
document.getElementById('refresh-button').addEventListener('click',loadChannels);
let vp=document.getElementById('video-player');
vp.addEventListener('error',()=>{handlePlaybackError('Erro de reprodução');});
vp.addEventListener('ended',()=>{handlePlaybackError('Reprodução finalizada');});
vp.addEventListener('playing',()=>{hideLoading();connectionStats.lastSuccess=new Date();retryTimeout=null;isPlaying=true;updatePlayPauseButton();autoFullscreen();});
vp.addEventListener('pause',()=>{isPlaying=false;updatePlayPauseButton();});
vp.addEventListener('timeupdate',updateProgressBar);
vp.addEventListener('volumechange',updateVolumeUI);
document.getElementById('play-pause').addEventListener('click',togglePlayPause);
document.getElementById('mute-btn').addEventListener('click',toggleMute);
document.getElementById('volume-slider').addEventListener('input',function(){vp.volume=this.value;});
document.getElementById('progress-bar').addEventListener('click',seekVideo);
document.addEventListener('keydown',function(e){if(e.key==='Escape'&&isFullscreen)exitFullscreen();if(e.key==='f'||e.key==='F')toggleFullscreen();if(e.key===' ')togglePlayPause();if(e.key==='m'||e.key==='M')toggleMute();if(e.key==='ArrowRight')seekRelative(5);if(e.key==='ArrowLeft')seekRelative(-5);if(e.key==='ArrowUp')changeVolume(0.1);if(e.key==='ArrowDown')changeVolume(-0.1);});
document.addEventListener('fullscreenchange',handleFullscreenChange);
document.addEventListener('webkitfullscreenchange',handleFullscreenChange);
document.addEventListener('mozfullscreenchange',handleFullscreenChange);
document.addEventListener('MSFullscreenChange',handleFullscreenChange);
}
function handleFullscreenChange(){isFullscreen=!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement);document.getElementById('exit-fullscreen-button').style.display=isFullscreen?'block':'none';}
function toggleFullscreen(){isFullscreen?exitFullscreen():enterFullscreen();}
function enterFullscreen(){let p=document.getElementById('player');p.requestFullscreen? p.requestFullscreen() : p.webkitRequestFullscreen? p.webkitRequestFullscreen() : p.mozRequestFullScreen? p.mozRequestFullScreen() : p.msRequestFullscreen&&p.msRequestFullscreen();}
function exitFullscreen(){document.exitFullscreen? document.exitFullscreen() : document.webkitExitFullscreen? document.webkitExitFullscreen() : document.mozCancelFullScreen? document.mozCancelFullScreen() : document.msExitFullscreen&&document.msExitFullscreen();}
function autoFullscreen(){if(!isFullscreen)enterFullscreen();}
function loadChannels(){
showLoading('Carregando lista de canais...');
let listaM3U=`#EXTM3U
#EXTINF:-1 tvg-name="AMC HD" tvg-logo="https://upload.wikimedia.org/wikipedia/commons/thumb/5/53/AMC_2019.svg/800px-AMC_2019.svg.png" group-title="CANAIS BR",AMC HD
https://canaismax.com/amc/index.m3u8
#EXTINF:-1 tvg-name="Animal Planet HD" tvg-logo="https://upload.wikimedia.org/wikipedia/commons/thumb/6/6c/Animal_Planet_2018.svg/800px-Animal_Planet_2018.svg.png" group-title="CANAIS BR",Animal Planet HD
https://canaismax.com/animalplanet/index.m3u8
#EXTINF:-1 tvg-name="Arte 1 HD" tvg-logo="https://upload.wikimedia.org/wikipedia/commons/thumb/6/69/Arte_1_logo.png/800px-Arte_1_logo.png" group-title="CANAIS BR",Arte 1 HD
https://canaismax.com/arte1/index.m3u8
#EXTINF:-1 tvg-name="AXN HD" tvg-logo="https://upload.wikimedia.org/wikipedia/commons/thumb/d/dc/AXN_logo_%282015%29.svg/800px-AXN_logo_%282015%29.svg.png" group-title="CANAIS BR",AXN HD
https://canaismax.com/axn/index.m3u8
#EXTINF:-1 tvg-name="BAND" tvg-logo="https://upload.wikimedia.org/wikipedia/commons/thumb/5/5c/Band_logo_2017.png/800px-Band_logo_2017.png" group-title="CANAIS BR",BAND
https://canaismax.com/band/index.m3u8`;
processChannels(listaM3U);
}
function processChannels(data){let lines=data.split('\n');allChannels=[];for(let i=0;i<lines.length;i++){let line=lines[i].trim();if(line.startsWith('#EXTINF:')){let channelInfo=parseExtinfLine(line);let url=lines[i+1]?lines[i+1].trim():'';if(url&&(url.startsWith('http://')||url.startsWith('https://'))){allChannels.push({name:channelInfo.name,url:url,logo:channelInfo.logo,group:channelInfo.group,format:detectStreamFormat(url)});}}}allChannels.sort((a,b)=>a.name.localeCompare(b.name));renderChannels(allChannels);if(allChannels.length>0)playChannel(allChannels[0]);}
function parseExtinfLine(line){let info={name:'',logo:'',group:''};let commaIndex=line.lastIndexOf(',');if(commaIndex!==-1)info.name=line.substring(commaIndex+1).trim();let logoMatch=line.match(/tvg-logo="([^"]*)"/);if(logoMatch)info.logo=logoMatch[1];let groupMatch=line.match(/group-title="([^"]*)"/);if(groupMatch)info.group=groupMatch[1];return info;}
function detectStreamFormat(url){if(url.includes('.m3u8')||url.includes('mpegurl')||url.includes('hls'))return'HLS';if(url.includes('.mp4'))return'MP4';return'HLS';}
function renderChannels(channels){let list=document.getElementById('channels-list');list.innerHTML='';if(channels.length===0){let li=document.createElement('li');li.textContent='Nenhum canal encontrado';list.appendChild(li);return;}channels.forEach(c=>{let li=document.createElement('li');if(c.logo){let img=document.createElement('img');img.src=c.logo;img.className='channel-logo';img.alt='';img.onerror=function(){this.style.display='none';};li.appendChild(img);}let infoDiv=document.createElement('div');infoDiv.className='channel-info';let nameDiv=document.createElement('div');nameDiv.className='channel-name';nameDiv.textContent=c.name;infoDiv.appendChild(nameDiv);if(c.group){let groupDiv=document.createElement('div');groupDiv.className='channel-group';groupDiv.textContent=c.group;infoDiv.appendChild(groupDiv);}li.appendChild(infoDiv);if(c.format){let badge=document.createElement('span');badge.className='format-badge';badge.textContent=c.format;li.appendChild(badge);}li.onclick=function(){playChannel(c);setActiveChannel(li);};list.appendChild(li);});}
function filterChannels(){let txt=document.getElementById('search-input').value.toLowerCase();if(!txt){renderChannels(allChannels);return;}let filtered=allChannels.filter(c=>c.name.toLowerCase().includes(txt)||(c.group&&c.group.toLowerCase().includes(txt)));renderChannels(filtered);}
function playChannel(channel){currentChannel=channel;clearTimeout(retryTimeout);showLoading('Carregando '+channel.name+'...');let vp=document.getElementById('video-player');vp.src=channel.url;vp.load();showChannelInfo(channel);let type=getVideoType(channel.url);if(type){while(vp.children.length>0)vp.removeChild(vp.firstChild);let s=document.createElement('source');s.src=channel.url;s.type=type;vp.appendChild(s);}vp.load();let p=vp.play();if(p!==undefined)p.catch(()=>{retryPlayback(channel);});}
function getVideoType(url){if(url.includes('.m3u8')||url.includes('mpegurl')||/\/\d+$/.test(url))return'application/x-mpegURL';if(url.includes('.mp4'))return'video/mp4';return null;}
function setActiveChannel(li){let items=document.getElementById('channels-list').getElementsByTagName('li');for(let i=0;i<items.length;i++)items[i].classList.remove('active');li.classList.add('active');}
function showChannelInfo(c){let info=document.getElementById('info-panel');info.textContent=c.name+' • '+c.format;info.style.display='block';setTimeout(()=>{info.style.display='none';},3000);}
function showLoading(msg){document.getElementById('loading').style.display='flex';document.querySelector('.loading-text').textContent=msg;}
function hideLoading(){document.getElementById('loading').style.display='none';}
function handlePlaybackError(msg){showLoading('Tentando reconectar...');retryTimeout=setTimeout(()=>{if(currentChannel)retryPlayback(currentChannel);},2000);}
function retryPlayback(channel){playChannel(channel);}
function togglePlayPause(){let vp=document.getElementById('video-player');vp.paused||vp.ended?vp.play():vp.pause();}
function updatePlayPauseButton(){let btn=document.getElementById('play-pause').querySelector('i');isPlaying?(btn.classList.remove('fa-play'),btn.classList.add('fa-pause')):(btn.classList.remove('fa-pause'),btn.classList.add('fa-play'));}
function toggleMute(){let vp=document.getElementById('video-player');vp.muted=!vp.muted;updateVolumeUI();}
function updateVolumeUI(){let vp=document.getElementById('video-player');let vs=document.getElementById('volume-slider');let mi=document.getElementById('mute-btn').querySelector('i');vs.value=vp.volume;if(vp.muted||vp.volume===0){mi.className='fas fa-volume-mute';}else if(vp.volume>0.5){mi.className='fas fa-volume-up';}else{mi.className='fas fa-volume-down';}}
function changeVolume(delta){let vp=document.getElementById('video-player');vp.volume=Math.max(0,Math.min(1,vp.volume+delta));updateVolumeUI();}
function updateProgressBar(){let vp=document.getElementById('video-player');let prog=document.getElementById('progress');let td=document.getElementById('time-display');if(vp.duration){let p=(vp.currentTime/vp.duration)*100;prog.style.width=p+'%';td.textContent=formatTime(vp.currentTime)+' / '+formatTime(vp.duration);}}
function formatTime(s){let m=Math.floor(s/60);s=Math.floor(s%60);return m.toString().padStart(2,'0')+':'+s.toString().padStart(2,'0');}
function seekVideo(e){let vp=document.getElementById('video-player');let pb=document.getElementById('progress-bar');vp.currentTime=(e.offsetX/pb.offsetWidth)*vp.duration;}
function seekRelative(s){document.getElementById('video-player').currentTime+=s;}
function startConnectionMonitor(){setInterval(updateStatsPanel,1000);}
function updateStatsPanel(){let sp=document.getElementById('stats-panel');let vp=document.getElementById('video-player');if(!vp.src){sp.style.display='none';return;}let txt='';if(connectionStats.lastSuccess)txt+='Conectado: '+Math.floor((new Date()-connectionStats.lastSuccess)/1000)+'s | ';if(vp.readyState>0&&vp.buffered.length>0)txt+='Buffer: '+Math.floor(vp.buffered.end(0)-vp.currentTime)+'s | ';txt+='Tentativas: '+connectionStats.retries;sp.textContent=txt;sp.style.display='block';}
</script>
</body>
</html>
