<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TV SIMPLES</title>
<style>
body {
    margin: 0;
    padding: 0;
    background: black;
    color: white;
    font-family: Arial;
}

#header {
    background: #222;
    padding: 10px;
    border-bottom: 3px solid red;
    text-align: center;
}

#header h1 {
    color: red;
    margin: 5px 0;
    font-size: 24px;
}

#search {
    width: 90%;
    padding: 8px;
    margin: 5px;
    font-size: 16px;
}

.container {
    display: table;
    width: 100%;
    height: 85vh;
}

#player {
    display: table-cell;
    width: 70%;
    vertical-align: top;
    padding: 10px;
}

#channels {
    display: table-cell;
    width: 30%;
    background: #111;
    overflow-y: auto;
    border-left: 2px solid #333;
}

.channel {
    padding: 12px;
    border-bottom: 1px solid #333;
    cursor: pointer;
    font-size: 14px;
}

.channel:hover {
    background: #333;
}

.active {
    background: red !important;
    font-weight: bold;
}

#playerFrame {
    width: 100%;
    height: 100%;
    border: none;
    background: black;
}

#message {
    text-align: center;
    padding: 40px;
    color: #999;
}
</style>
</head>

<body>

<div id="header">
    <h1>ðŸ“º TV SIMPLES</h1>
    <input type="text" id="search" placeholder="Digite para buscar..." onkeyup="search()">
</div>

<div class="container">
    <div id="player">
        <div id="message">Selecione um canal da lista</div>
        <iframe id="playerFrame" style="display:none;"></iframe>
    </div>
    
    <div id="channels">
        <!-- Canais carregados pelo JavaScript -->
    </div>
</div>

<script>
// CANAIS - array direto no cÃ³digo
var channels = [
    ["Globo SP", "https://embedtvonline.com/globosp/"],
    ["SBT SP", "https://embedtvonline.com/sbtsp/"],
    ["Record SP", "https://embedtvonline.com/recordsp/"],
    ["Band SP", "https://embedtvonline.com/bandsp/"],
    ["RedeTV!", "https://embedtvonline.com/redetv/"],
    ["TV Cultura", "https://embedtvonline.com/tvcultura/"],
    ["SporTV", "https://embedtvonline.com/sportv/"],
    ["SporTV 2", "https://embedtvonline.com/sportv2/"],
    ["SporTV 3", "https://embedtvonline.com/sportv3/"],
    ["GloboNews", "https://embedtvonline.com/globonews/"],
    ["Record News", "https://embedtvonline.com/recordnews/"],
    ["CNN Brasil", "https://embedtvonline.com/cnnbrasil/"],
    ["HBO", "https://embedtvonline.com/hbo/"],
    ["Discovery Kids", "https://embedtvonline.com/discoverykids/"],
    ["Cartoon Network", "https://embedtvonline.com/cartoonnetwork/"],
    ["Band Sports", "https://embedtvonline.com/bandsports/"],
    ["Combate", "https://embedtvonline.com/combate/"],
    ["TNT", "https://embedtvonline.com/tnt/"],
    ["Premiere", "https://embedtvonline.com/premiere2/"],
    ["ESPN", "https://embedtvonline.com/espn/"]
];

// FUNÃ‡ÃƒO PARA CARREGAR CANAIS
function loadChannels(filter) {
    var container = document.getElementById("channels");
    container.innerHTML = "";
    
    for (var i = 0; i < channels.length; i++) {
        var name = channels[i][0];
        var url = channels[i][1];
        
        // Filtro de busca
        if (filter) {
            if (name.toLowerCase().indexOf(filter.toLowerCase()) === -1) {
                continue;
            }
        }
        
        var div = document.createElement("div");
        div.className = "channel";
        div.innerHTML = name;
        div.onclick = (function(nome, endereco, idx) {
            return function() {
                selectChannel(nome, endereco, idx);
            };
        })(name, url, i);
        
        container.appendChild(div);
    }
}

// SELECIONAR CANAL
function selectChannel(name, url, index) {
    // Remover classe active de todos
    var allChannels = document.getElementsByClassName("channel");
    for (var i = 0; i < allChannels.length; i++) {
        allChannels[i].className = "channel";
    }
    
    // Adicionar active no selecionado
    allChannels[index].className = "channel active";
    
    // Mostrar no player
    document.getElementById("message").style.display = "none";
    var frame = document.getElementById("playerFrame");
    frame.style.display = "block";
    frame.src = url;
    
    // Scroll para o canal selecionado
    allChannels[index].scrollIntoView();
    
    // Salvar Ãºltimo canal (tentativa)
    try {
        localStorage.setItem("lastChannel", name);
    } catch(e) {
        // Ignora erro se localStorage nÃ£o funcionar
    }
}

// BUSCAR CANAIS
function search() {
    var text = document.getElementById("search").value;
    loadChannels(text);
}

// CARREGAR ÃšLTIMO CANAL
function loadLastChannel() {
    try {
        var last = localStorage.getItem("lastChannel");
        if (last) {
            for (var i = 0; i < channels.length; i++) {
                if (channels[i][0] === last) {
                    selectChannel(channels[i][0], channels[i][1], i);
                    break;
                }
            }
        }
    } catch(e) {
        // Ignora erro
    }
}

// CONTROLE POR TECLADO (para controle remoto)
document.onkeydown = function(e) {
    e = e || window.event;
    
    var active = document.querySelector(".active");
    var allChannels = document.getElementsByClassName("channel");
    
    if (allChannels.length === 0) return;
    
    var currentIndex = 0;
    if (active) {
        for (var i = 0; i < allChannels.length; i++) {
            if (allChannels[i] === active) {
                currentIndex = i;
                break;
            }
        }
    }
    
    // Seta para baixo
    if (e.keyCode === 40) {
        e.preventDefault();
        var nextIndex = Math.min(currentIndex + 1, allChannels.length - 1);
        allChannels[nextIndex].click();
    }
    
    // Seta para cima
    if (e.keyCode === 38) {
        e.preventDefault();
        var prevIndex = Math.max(currentIndex - 1, 0);
        allChannels[prevIndex].click();
    }
    
    // Enter para selecionar
    if (e.keyCode === 13 && active) {
        // JÃ¡ selecionado pelo click
    }
    
    // ESC para voltar
    if (e.keyCode === 27) {
        document.getElementById("search").focus();
    }
};

// INICIAR TUDO QUANDO A PÃGINA CARREGAR
window.onload = function() {
    loadChannels();
    loadLastChannel();
    
    // Focar no campo de busca
    document.getElementById("search").focus();
};

// Fallback se window.onload nÃ£o funcionar
// ForÃ§ar carregamento apÃ³s 1 segundo
setTimeout(function() {
    if (document.getElementById("channels").innerHTML === "") {
        loadChannels();
    }
}, 1000);
</script>

</body>
</html>
